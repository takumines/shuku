# GoReleaserè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
# è©³ç´°: https://goreleaser.com

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
project_name: shuku

# ãƒ“ãƒ«ãƒ‰è¨­å®šå‰ã®hooks
before:
  hooks:
    - go mod tidy

# ãƒ“ãƒ«ãƒ‰è¨­å®š
builds:
  - id: shuku
    main: ./cmd/shuku
    binary: shuku
    goos:
      - linux
      - windows
      - darwin
    goarch:
      - amd64
      - arm64
    # Windows ARM64ã§ã®CGOå•é¡Œã‚’å›é¿
    ignore:
      - goos: windows
        goarch: arm64
    # CGOå¯¾å¿œã®ãŸã‚ã®ã‚¯ãƒ­ã‚¹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«è¨­å®š
    hooks:
      post:
        - cmd: 'echo "Built {{ .Path }}"'
    env:
      - CGO_ENABLED=1
    ldflags:
      - -s -w
      - -X shuku/cmd/shuku/version.Version={{ .Version }}
      - -X shuku/cmd/shuku/version.Commit={{ .Commit }}
      - -X shuku/cmd/shuku/version.Date={{ .Date }}

# ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–è¨­å®š
archives:
  - id: shuku
    name_template: "{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"
    format_overrides:
      - goos: windows
        format: zip
    files:
      - README.md
      - LICENSE*
      - CHANGELOG*

# ãƒã‚§ãƒƒã‚¯ã‚µãƒ ç”Ÿæˆ
checksum:
  name_template: "checksums.txt"

# ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆè¨­å®š
release:
  github:
    owner: takumines
    name: shuku
  name_template: "Release v{{ .Version }}"
  header: |
    ## shuku v{{ .Version }}
    
    ç”»åƒåœ§ç¸®CLIãƒ„ãƒ¼ãƒ«ã€Œshukuã€ã®æ–°ã—ã„ãƒªãƒªãƒ¼ã‚¹ã§ã™ã€‚
    
    ### ä½¿ç”¨æ–¹æ³•
    ```bash
    # JPEGåœ§ç¸®
    ./shuku compress --input image.jpg --output compressed.jpg --quality 80
    
    # PNGåœ§ç¸®
    ./shuku compress --input image.png --output compressed.png
    ```

# ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆè¨­å®šï¼ˆé–‹ç™ºç‰ˆï¼‰
snapshot:
  name_template: "{{ .Version }}-{{ .ShortCommit }}"

# å¤‰æ›´ãƒ­ã‚°è¨­å®š
changelog:
  sort: asc
  use: github
  filters:
    exclude:
      - "^docs:"
      - "^test:"
      - "^ci:"
      - "^style:"
      - "^refactor:"
      - "^chore:"
  groups:
    - title: "ğŸš€ æ–°æ©Ÿèƒ½"
      regexp: "^.*feat.*:"
      order: 0
    - title: "ğŸ› ãƒã‚°ä¿®æ­£"
      regexp: "^.*fix.*:"
      order: 1
    - title: "ğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ"
      regexp: "^.*docs.*:"
      order: 2
    - title: "ğŸ”§ ãã®ä»–"
      order: 999

# ç„¡åŠ¹åŒ–ã™ã‚‹æ©Ÿèƒ½
dockers:
  - skip_push: true
nfpms:
  - maintainer: ""
publishers:
  - disable: true